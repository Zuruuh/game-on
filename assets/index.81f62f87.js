var V=Object.defineProperty;var T=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var o=(r,e,t)=>(T(r,typeof e!="symbol"?e+"":e,t),t),x=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var u=(r,e,t)=>(x(r,e,"read from private field"),t?t.call(r):e.get(r)),l=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},y=(r,e,t,i)=>(x(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var h=(r,e,t)=>(x(r,e,"access private method"),t);const A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};A();class z{static selectOrThrow(e){const t=document.querySelector(e);if(!(t instanceof HTMLElement))throw new Error(`Could not find a dom element for selector "${e}"`);return t}}document.selectOrThrow=z.selectOrThrow;var p,B;class ${constructor(){l(this,p)}async start(){h(this,p,B).call(this)}}p=new WeakSet,B=function(){const e=document.selectOrThrow("nav.layout");document.selectOrThrow("#nav-menu-icon").addEventListener("click",()=>e.classList.toggle("responsive"))};new $().start().catch(console.error);class S{constructor(e){o(this,"modals",[]);o(this,"element");this.element=document.selectOrThrow(e)}updateContainerVisibility(){if(this.modals.some(e=>e.isVisible))return this.show();this.hide()}addModal(e){this.modals.push(e),e.container=this}removeModal(e){this.modals=this.modals.filter(t=>t!==e),e.container=null}show(){this.element.classList.add("shown")}hide(){this.element.classList.remove("shown")}}function N(r){return Array.from(new Set(r))}var v;class O{constructor(e,t){o(this,"element");o(this,"container",null);l(this,v,e=>{const t=e.map(n=>Array.from(document.querySelectorAll(n))).reduce((n,a)=>[...a,...n]),i=Array.from(this.element.querySelectorAll(".modal-close-button"));N([...t,...i]).forEach(n=>n.addEventListener("click",()=>this.toggleVisibility.bind(this)()))});this.element=document.selectOrThrow(e),u(this,v).call(this,t)}toggleVisibility(){var t;this.element.classList.toggle("shown");const e=this.element.attributes.getNamedItem("aria-hidden");if(!e)throw new Error(`An "aria-hidden" attribute should be set on the modal element ${this.element}`);e.value=(e.value==="false").toString(),this.element.classList.contains("shown")&&this.element.focus(),(t=this.container)==null||t.updateContainerVisibility()}get isVisible(){return this.element.classList.contains("shown")}}v=new WeakMap;class q{constructor(e){o(this,"formBuilder");this.formBuilder=e}get form(){return this.formBuilder.form}validateFieldByName(e){const t=this.formBuilder.getFieldByName(e);if(!t)throw new Error(`Could not find a field with name "${e}" inside form ${this.formBuilder.form.name}`);return this.validateField(t)}validateField(e){return e.validators.filter(t=>e.isMultiple?!t.validateMultiple(Array.from(e.element.querySelectorAll(`input[name="${e.name}"]`))):!t.validate(e.element)).map(t=>t.options.message)}validateForm(){const e=this.formBuilder.fields.map(t=>{const i=this.validateField(t);return{[t.name]:i}}).reduce((t,i)=>({...t,...i}));return Object.values(e).some(t=>t.length)?e:!0}}var g,L,b,M;class C extends O{constructor(t,i,s,n){super(i,s);l(this,g);l(this,b);o(this,"formValidator");o(this,"onSubmit");this.formValidator=new q(t),this.onSubmit=n,h(this,g,L).call(this)}get form(){return this.formValidator.form}get formBuilder(){return this.formValidator.formBuilder}get formFields(){return this.formBuilder.fields}submit(t){t.preventDefault();const i=this.formValidator.validateForm();if(i===!0){const s=Array.from(new FormData(t.target).entries()).map(([n,a])=>({[n]:a})).reduce((n,a)=>({...n,...a}));this.onSubmit(t,s);return}h(this,b,M).call(this,i)}}g=new WeakSet,L=function(){this.formValidator.form.addEventListener("submit",this.submit.bind(this)),this.formFields.forEach(t=>{t.isMultiple||(t.element.addEventListener("focusout",i=>{const s=this.formValidator.validateField(t);t.displayErrors(s)}),t.element.addEventListener("input",i=>{t.container.removeAttribute("data-error"),t.debounceTimeout&&clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(()=>{const s=this.formValidator.validateField(t);t.displayErrors(s)},1500)}))})},b=new WeakSet,M=function(t){Object.entries(t).forEach(([i,[s]])=>{const n=this.formBuilder.getFieldByName(i).element;s?n.parentElement.setAttribute("data-error",s):n.parentElement.removeAttribute("data-error")})};class d{constructor(e={}){o(this,"options");o(this,"validate",e=>{throw new Error(`${this.constructor.name} was not implemented!`)});o(this,"validateMultiple",e=>e.every(this.validate));this.options=e}}class k extends d{constructor(){super(...arguments);o(this,"validate",t=>{var s;const i=(s=this.options.min)!=null?s:0;return t.value&&t.value.length>i})}}class I extends d{constructor(){super(...arguments);o(this,"validate",t=>t.value&&t.value.trim()===t.value)}}class H extends d{constructor(){super(...arguments);o(this,"validate",t=>{var s;const i=(s=this.options.max)!=null?s:Number.MAX_SAFE_INTEGER;return t.value.length<i})}}const E=class extends d{constructor(){super(...arguments);o(this,"validate",t=>E.EMAIL_REGEXP.test(t.value))}};let f=E;o(f,"EMAIL_REGEXP",/(?:[a-z\d!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z\d!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z\d](?:[a-z\d-]*[a-z\d])?\.)+[a-z\d](?:[a-z\d-]*[a-z\d])?|\[(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?|[a-z\d-]*[a-z\d]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/);class _ extends d{constructor(){super(...arguments);o(this,"validate",t=>!isNaN(parseInt(t.value)))}}class R extends d{constructor(){super(...arguments);o(this,"validate",t=>{switch(t.type){case"checkbox":return t.checked;default:return t.value!==null||t.value!==void 0}});o(this,"validateMultiple",t=>t.some(i=>i.checked))}}class D extends d{constructor(){super(...arguments);o(this,"validate",t=>/\d{4}-\d{2}-\d{2}/.test(t.value))}}var m,c;class P{constructor(e,t,i){o(this,"formBuilder");o(this,"name");l(this,m,void 0);o(this,"validators",[]);l(this,c,void 0);o(this,"debounceTimeout");this.formBuilder=e,this.name=t,y(this,c,i)}get isSingle(){return u(this,c)==="single"}get isMultiple(){return u(this,c)==="multiple"}get container(){return this.element.parentElement}done(){return this.getForm()}getForm(){return this.formBuilder}add(e,t="single"){return this.formBuilder.add(e,t)}get element(){if(u(this,m))return u(this,m);let e;this.isMultiple?e=this.formBuilder.form.querySelector(`ul[data-name=${this.name}]`):e=this.formBuilder.form.querySelector(`input[name="${this.name}"]`);const t=e instanceof HTMLUListElement||e instanceof HTMLInputElement;if(!e||!t)throw new Error(`Could not find a valid html element with name ${this.name} in the form ${this.formBuilder.form}`);return y(this,m,e),e}displayErrors(e){if(!e.length)return this.container.removeAttribute("data-error");const[t]=e;this.container.setAttribute("data-error",t)}notBlank(e){return this.validators.push(new I({message:e})),this}min(e,t){return this.validators.push(new k({min:e,message:t})),this}max(e,t){return this.validators.push(new H({max:e,message:t})),this}email(e){return this.validators.push(new f({message:e})),this}number(e){return this.validators.push(new _({message:e})),this}required(e){return this.validators.push(new R({message:e})),this}date(e){return this.validators.push(new D({message:e})),this}}m=new WeakMap,c=new WeakMap;class G{constructor(e){o(this,"form");o(this,"fields",[]);if(!(e instanceof HTMLFormElement))throw new Error("Invalid html element passed to form builders!");this.form=e}add(e,t="single"){const i=new P(this,e,t);return this.fields.push(i),i}getFieldByName(e){var t;return(t=this.fields.find(i=>i.name===e))!=null?t:null}}function X(r){return new G(r).add("firstname").notBlank("Vous devez sp\xE9cifier votre pr\xE9nom.").min(1,"Votre pr\xE9nom doit faire au moins 2 charact\xE8res.").add("lastname").notBlank("Vous devez sp\xE9cifier votre nom de famille.").min(1,"Votre nom de famille doit faire au moins 2 charact\xE8res.").add("email").notBlank("Vous devez sp\xE9cifier une addresse mail.").email("Votre addresse mail n'est pas valide.").add("birthdate").date("Veuillez entrer une date valide").add("participations").number("Vous devez entrer un nombre valide").add("location","multiple").required("Veuillez choisir la ville ou vous souhaitez participer.").add("terms-and-conditions").required("Vous devez accepter les conditions d'utilisation").add("subscribe").getForm()}var w,F;class j{constructor(){l(this,w)}async start(){const e=h(this,w,F).call(this),t=new S("#modals-container"),i=new C(X(e),"#registration-modal",[".register-modals-btn",".btn-signup"],(s,n)=>{s.target.parentElement.innerHTML=`<p class="modal-message">Merci ${n.firstname}! Votre r\xE9servation a \xE9t\xE9 re\xE7ue.</p>`,console.log(n)});t.addModal(i)}}w=new WeakSet,F=function(){const e=document.querySelector('form[name="registration"]');if(!(e instanceof HTMLFormElement))throw new Error("Could not find registration form html element");return e};new j().start().catch(console.error);
