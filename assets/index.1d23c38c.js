var L=Object.defineProperty;var F=(r,e,t)=>e in r?L(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var n=(r,e,t)=>(F(r,typeof e!="symbol"?e+"":e,t),t),x=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var d=(r,e,t)=>(x(r,e,"read from private field"),t?t.call(r):e.get(r)),a=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},b=(r,e,t,i)=>(x(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);var h=(r,e,t)=>(x(r,e,"access private method"),t);const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};V();class z{static selectOrThrow(e){const t=document.querySelector(e);if(!(t instanceof HTMLElement))throw new Error(`Could not find a dom element for selector "${e}"`);return t}}document.selectOrThrow=z.selectOrThrow;var p,B;class ${constructor(){a(this,p)}async start(){h(this,p,B).call(this)}}p=new WeakSet,B=function(){const e=document.selectOrThrow("nav.layout");document.selectOrThrow("#nav-menu-icon").addEventListener("click",()=>e.classList.toggle("responsive"))};new $().start().catch(console.error);class S{constructor(e){n(this,"modals",[]);n(this,"element");this.element=document.selectOrThrow(e)}updateContainerVisibility(){if(this.modals.some(e=>e.isVisible))return this.show();this.hide()}addModal(e){this.modals.push(e),e.container=this}removeModal(e){this.modals=this.modals.filter(t=>t!==e),e.container=null}show(){this.element.classList.add("shown")}hide(){this.element.classList.remove("shown")}}function A(r){return Array.from(new Set(r))}var v;class T{constructor(e,t){n(this,"element");n(this,"container",null);a(this,v,e=>{const t=e.map(o=>Array.from(document.querySelectorAll(o))).reduce((o,c)=>[...c,...o]),i=Array.from(this.element.querySelectorAll(".modals-close-button"));A([...t,...i]).forEach(o=>o.addEventListener("click",()=>this.toggle.bind(this)()))});this.element=document.selectOrThrow(e),d(this,v).call(this,t)}toggle(){var t;this.element.classList.toggle("shown");const e=this.element.attributes.getNamedItem("aria-hidden");if(!e)throw new Error(`An "aria-hidden" attribute should be set on the modal element ${this.element}`);e.value=Boolean(e.value==="false").toString(),(t=this.container)==null||t.updateContainerVisibility()}get isVisible(){return this.element.classList.contains("shown")}}v=new WeakMap;class q{constructor(e){n(this,"formBuilder");this.formBuilder=e}get form(){return this.formBuilder.form}validateFieldByName(e){const t=this.formBuilder.getFieldByName(e);if(!t)throw new Error(`Could not find a field with name "${e}" inside form ${this.formBuilder.form.name}`);return this.validateField(t)}validateField(e){console.log(`Validating field: ${e.name} (${e.isMultiple?"Multiple":"Single"})`);const t=e.validators.filter(i=>e.isMultiple?!i.validateMultiple(Array.from(e.element.querySelectorAll(`input[name="${e.name}"]`))):!i.validate(e.element)).map(i=>i.options.message);return t.length?t:!0}validateForm(){const e=this.formBuilder.fields.map(t=>{const i=this.validateField(t);return i===!0?{}:{[t.name]:i}}).reduce((t,i)=>({...t,...i}));return Object.keys(e).length?e:!0}}var g,M;class N extends T{constructor(t,i,s,o){super(i,s);a(this,g);n(this,"formValidator");n(this,"onSubmit");this.formValidator=new q(t),this.onSubmit=o,h(this,g,M).call(this)}submit(t){t.preventDefault();const i=this.formValidator.validateForm();console.log(i),i===!0&&this.onSubmit(t)}}g=new WeakSet,M=function(){this.formValidator.form.addEventListener("submit",this.submit.bind(this))};class l{constructor(e={}){n(this,"options");n(this,"validate",e=>{throw new Error(`${this.constructor.name} was not implemented!`)});n(this,"validateMultiple",e=>e.every(this.validate));this.options=e}}class O extends l{constructor(){super(...arguments);n(this,"validate",t=>{var s;const i=(s=this.options.min)!=null?s:0;return t.value&&t.value.length>i})}}class k extends l{constructor(){super(...arguments);n(this,"validate",t=>t.value&&t.value.trim()===t.value)}}class C extends l{constructor(){super(...arguments);n(this,"validate",t=>{var s;const i=(s=this.options.max)!=null?s:Number.MAX_SAFE_INTEGER;return t.value.length<i})}}const y=class extends l{constructor(){super(...arguments);n(this,"validate",t=>y.EMAIL_REGEXP.test(t.value))}};let f=y;n(f,"EMAIL_REGEXP",/(?:[a-z\d!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z\d!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z\d](?:[a-z\d-]*[a-z\d])?\.)+[a-z\d](?:[a-z\d-]*[a-z\d])?|\[(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?|[a-z\d-]*[a-z\d]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/);class I extends l{constructor(){super(...arguments);n(this,"validate",t=>!isNaN(parseInt(t.value)))}}class H extends l{constructor(){super(...arguments);n(this,"validate",t=>{switch(t.type){case"checkbox":return t.checked;default:return t.value!==null||t.value!==void 0}});n(this,"validateMultiple",t=>t.some(i=>i.checked))}}class _ extends l{constructor(){super(...arguments);n(this,"validate",t=>/\d{4}-\d{2}-\d{2}/.test(t.value))}}var u,m;class R{constructor(e,t,i){n(this,"formBuilder");n(this,"name");a(this,u,void 0);n(this,"validators",[]);a(this,m,void 0);this.formBuilder=e,this.name=t,b(this,m,i)}get isSingle(){return d(this,m)==="single"}get isMultiple(){return d(this,m)==="multiple"}done(){return this.getForm()}getForm(){return this.formBuilder}add(e,t="single"){return this.formBuilder.add(e,t)}get element(){if(d(this,u))return d(this,u);let e;this.isMultiple?e=this.formBuilder.form.querySelector(`ul[data-name=${this.name}]`):e=this.formBuilder.form.querySelector(`input[name="${this.name}"]`);const t=e instanceof HTMLUListElement||e instanceof HTMLInputElement;if(!e||!t)throw new Error(`Could not find a valid html element with name ${this.name} in the form ${this.formBuilder.form}`);return b(this,u,e),e}notBlank(e){return this.validators.push(new k({message:e})),this}min(e,t){return this.validators.push(new O({min:e,message:t})),this}max(e,t){return this.validators.push(new C({max:e,message:t})),this}email(e){return this.validators.push(new f({message:e})),this}number(e){return this.validators.push(new I({message:e})),this}required(e){return this.validators.push(new H({message:e})),this}date(e){return this.validators.push(new _({message:e})),this}}u=new WeakMap,m=new WeakMap;class P{constructor(e){n(this,"form");n(this,"fields",[]);if(!(e instanceof HTMLFormElement))throw new Error("Invalid html element passed to form builder!");this.form=e}add(e,t="single"){const i=new R(this,e,t);return this.fields.push(i),i}getFieldByName(e){var t;return(t=this.fields.find(i=>i.name===e))!=null?t:null}}function D(r){return new P(r).add("firstname").notBlank("Vous devez sp\xE9cifier votre pr\xE9nom.").min(1,"Votre pr\xE9nom doit faire au moins 2 charact\xE8res.").add("lastname").notBlank("Vous devez sp\xE9cifier votre nom de famille.").min(1,"Votre nom de famille doit faire au moins 2 charact\xE8res.").add("email").notBlank("Vous devez sp\xE9cifier une addresse mail.").email("Votre addresse mail n'est pas valide.").add("birthdate").date("Veuillez entrer une date valide").add("participations").number("Vous devez entrer un nombre valide").add("location","multiple").required("Veuillez choisir la ville ou vous souhaitez participer.").add("terms-and-conditions").required("Vous devez accepter les conditions d'utilisation").add("subscribe").getForm()}var w,E;class G{constructor(){a(this,w)}async start(){const e=h(this,w,E).call(this),t=new S("#modals-container"),i=new N(D(e),"#registration-modal",[".register-modals-btn",".btn-signup"],()=>{});t.addModal(i)}}w=new WeakSet,E=function(){const e=document.querySelector('form[name="registration"]');if(!(e instanceof HTMLFormElement))throw new Error("Could not find registration form html element");return e};new G().start().catch(console.error);
